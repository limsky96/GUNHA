<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>원건보다하늘</title>
    <link th:href="@{https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css}" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link th:href="@{/css/login/planform.css}" rel="stylesheet">    
</head>

<body>
        <script src="https://kit.fontawesome.com/179a863a03.js" crossorigin="anonymous"></script>
    
    <!--헤더 영역-->
    <div th:include="/header/header.html"></div>
    <!-- 로그인 페이지에 넣을거 -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script>
    $('header').addClass('hd-white'); // 로그인 페이지에 넣을거
    </script>

    <!--본문 영역-->
    <div class="wrap">
        <div id="container">
            <div>
                <div id="step">
                    <p style="font-size: small;">2/3단계</p>
                </div>
                <h3>원하는 멤버십을 선택하세요.</h3>
            </div>
            <div id="regi-content">
                <div class="d-flex">
                    <span style="color:red"><i class="fa-solid fa-check fa-2x"></i></span>
                    <p class="fs-5">무제한으로 즐기세요.</p>
                </div>

                <div class="d-flex">
                    <span style="color:red"><i class="fa-solid fa-check fa-2x"></i></span>
                    <p class="fs-5">취향에 꼭 맞는 콘텐츠를 추천해 드립니다.</p>
                </div>

                <div class="d-flex">
                    <span style="color:red"><i class="fa-solid fa-check fa-2x"></i></span>
                    <p class="fs-5">멤버십은 언제든지 변경 또는 해지 가능합니다.</p>
                </div>
            </div>

        </div>

        <!--pricing table -->

        <table class="table">
            <thead>
                <tr>
                  
                    <th scope="col"> </th>
                    <th scope="col"><input data-membership-no="1" data-amount="9500" class="btn btn-danger" id="basic-button" type="button" value="베이식"></th>
                    <th scope="col"><input data-membership-no="2" data-amount="13500" class="btn btn-danger" id="standard-button" type="button" value="스탠다드"></th>
                    <th scope="col"><input data-membership-no="3" data-amount="17000" class="btn btn-danger" id="premium-button" type="button" value="프리미엄"></th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <th scope="row">월 요금</th>
                    <td id="basic-price">9,500원</td>
                    <td id="standard-price">13,500원</td>
                    <td id="premium-price">17,000원</td>
                </tr>
                <tr>
                    <th scope="row">영상 화질</th>
                    <td id="basic-quality">좋음</td>
                    <td id="standard-quality">매우 좋음</td>
                    <td id="premium-quality">가장 좋음</td>
                </tr>
                <tr>
                    <th scope="row">해상도</th>
                    <td id="basic-resolution">720p</td>
                    <td id="standard-resolution">1080p</td>
                    <td id="premium-resolution">4K+HDR</td>
                </tr>
                <tr>
                    <th scope="row">TV, 컴퓨터, 스마트폰, 태블릿으로 시청</th>
                    <td><i class="fa-solid fa-check" id="basic-devices"></i></td>
                    <td><i class="fa-solid fa-check" id="standard-devices"></i></td>
                    <td><i class="fa-solid fa-check" id="premium-devices"></i></td>
                </tr>
                <tr>
                    <th scope="row">저장</th>
                    <td id="basic-save">&#45;</td>
                    <td id="standard-save"><i class="fa-solid fa-check"></td>
                    <td id="premium-save"><i class="fa-solid fa-check"></td>
                </tr>
            </tbody>
        </table>


        <div>         
          <p  id="planform-info">
            HD(720p), 풀 HD(1080p), UHD(4K), HDR 화질 제공 여부는 사용하는 인터넷 서비스와 디바이스의 성능에 따라 달라질 수 있습니다. 모든 콘텐츠가 모든 화질로 제공되지는 않습니다. 자세한 내용은 이용 약관을 확인하세요.
            <br><br>
            함께 거주하는 사람들만 계정을 함께 이용할 수 있습니다. 프리미엄 멤버십은 동시접속 4명, 스탠다드 또는 광고형 스탠다드는 2명, 베이식은 1명까지 가능합니다.
          </p>
        </div>

    
        <!--Next button-->
        <div class="col-auto1 pt-4 align-self-center d-grid">
            <a th:href="@{/paymentCard}" style="text-decoration: none; color: azure;">
                <button id="next-button" type="submit" class="btn btn-danger btn-lg">
                    <strong>다음</strong>
                </button>
            </a>
        </div>
        
    </div>

    <script>
        // 버튼을 클릭할 때 해당 열을 빨간색으로 변경하고 다른 열 리셋
        function highlightColumn(buttonId) {
            const columns = ["basic", "standard", "premium"];
            columns.forEach(function (column) {
                // 다른 열의 버튼 클래스 초기화
                document.getElementById(column + "-button").classList.remove('btn-danger');
                document.querySelector(`#${column}-button`).classList.remove("selected-btn");
                // 다른 열의 요소 색상 초기화
                document.getElementById(column + "-price").style.color = '';
                document.getElementById(column + "-quality").style.color = '';
                document.getElementById(column + "-resolution").style.color = '';
                document.getElementById(column + "-devices").style.color = '';
                document.getElementById(column + "-save").style.color = '';
            });

            // 클릭한 버튼에 클래스 추가
            document.getElementById(buttonId + "-button").classList.add('btn-danger');
            document.querySelector(`#${buttonId}-button`).classList.add("selected-btn");
            // 클릭한 버튼에 해당하는 요소의 색상을 빨간색으로 변경
            document.getElementById(buttonId + "-price").style.color = 'red';
            document.getElementById(buttonId + "-quality").style.color = 'red';
            document.getElementById(buttonId + "-resolution").style.color = 'red';
            document.getElementById(buttonId + "-devices").style.color = 'red';
            document.getElementById(buttonId + "-save").style.color = 'red';
            const selectedBtn  = document.querySelector(".selected-btn");
            console.log(selectedBtn.dataset.membershipNo);
            console.log(selectedBtn.dataset.amount);
        }

        // 각 버튼에 이벤트 리스너 등록
        document.getElementById("basic-button").addEventListener('click', function () {
            highlightColumn("basic");
        });

        document.getElementById("standard-button").addEventListener('click', function () {
            highlightColumn("standard");
        });

        document.getElementById("premium-button").addEventListener('click', function () {
            highlightColumn("premium");
        });
    </script>
            <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script>
      const submitting = () =>{
        const submitBtn = document.querySelector("#next-button");
        submitBtn.addEventListener("click",async e=>{
          e.preventDefault();
          const selectedBtn  = document.querySelector(".selected-btn");
          if(selectedBtn === null) return;
          console.log(e.target);
          const requestBody = {
            "membership_no": selectedBtn.dataset.membershipNo,
            "amount": selectedBtn.dataset.amount
          }
          const {data} = await axios.post("/account-update", requestBody);
          const {redirect_page} = data;
          if(redirect_page!== undefined){
            location.href= redirect_page;
          }
        })
      }
      submitting();

    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous">
        </script>
</body>

</html>